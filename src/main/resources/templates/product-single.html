<!DOCTYPE html>
<html lang="en">
<head>
    <title>우리음식 :: 농가와 소비자를 잇다</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <!-- Bootstrap Datepicker CSS -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">

    <!-- Bootstrap Datepicker JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">

    <link rel="stylesheet" href="/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="/css/animate.css">

    <link rel="stylesheet" href="/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="/css/magnific-popup.css">

    <link rel="stylesheet" href="/css/aos.css">

    <link rel="stylesheet" href="/css/ionicons.min.css">

    <link rel="stylesheet" href="/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="/css/jquery.timepicker.css">

    <link rel="stylesheet" href="/css/flaticon.css">
    <link rel="stylesheet" href="/css/icomoon.css">
    <link rel="stylesheet" href="/css/style.css">

    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js"
            crossorigin="anonymous"></script>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
        }

        th {
            background-color: #f4f4f4;
            width: 15%;
        }

        td {
            width: 85%;
        }

        .text-roller {
            width: 100%;
            height: 50px; /* 한 줄의 높이 */
            border: 1px solid #ccc;
            position: relative;
        }

        .roller {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            /* 동적으로 추가된 요소들이 애니메이션에 맞춰야 함 */
        }

    </style>
</head>
<body class="goto-here">
<!--회원가입, 로그인, 로그아웃, 마이페이지-->
<div class="container user-head" th:if="${login}">

    <th:block th:if="${isSeller}">
        <a href="/farm">농가정보</a>
    </th:block>
    <a href="/mypage">마이페이지</a>
    <a href="/logout">로그아웃</a>
</div>

<div class="container user-head" th:unless="${login}">
    <a href="/sign">회원가입</a>
    <a href="/login">로그인</a>
</div>

<!--검색창-->
<div class="container" style="display: flex; justify-content: space-between; align-items: center">
    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" class="logo-img"></a>
    <form action="/search" method="get" class="search-container" style="height: 100%">
        <input class="search-input" name="search_word" type="text" placeholder="">
        <button class="search-button" type="submit">검색</button>
    </form>
</div>
<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
    <div class="container">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
                aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="oi oi-menu">메뉴</span>
        </button>

        <div class="collapse navbar-collapse" id="ftco-nav" style="justify-content: center">
            <ul class="navbar-nav">
                <li class="nav-item"><a href="/" class="nav-link">홈</a></li>
                <li class="nav-item"><a href="/market-price" class="nav-link">시세 조회</a></li>
                <li class="nav-item"><a href="/search/category/1" class="nav-link">신선 채소</a></li>
                <li class="nav-item"><a href="/search/category/2" class="nav-link">신선 과일</a></li>
                <li class="nav-item"><a href="/search/category/3" class="nav-link">축산물</a></li>
                <li class="nav-item"><a href="/search/category/5" class="nav-link">먹거리 작물</a></li>
                <li class="nav-item"><a href="/search/category/4" class="nav-link">가공식품</a></li>
                <li class="nav-item"><a href="/farms" class="nav-link">농가 목록</a></li>
                <li class="nav-item cta cta-colored">
                    <a href="/cart" class="nav-link">
                        <span class="icon-shopping_cart"></span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<!-- END nav -->


<!--product-->
<section class="ftco-section">

    <!-- Modal -->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    상품을 장바구니에 담았습니다!
                    장바구니로 이동할까요?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">계속 쇼핑하기</button>
                    <a href="/cart" class="btn btn-primary">장바구니로 가기</a>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="w-100" style="margin: 20px 0; border-bottom: 1px solid">
            <i class="fa-regular fa-heart" style="font-size: 30px;"></i>
            <a th:href="'/farm/'+${product.farmId}">
                <h3 id="farmName" th:text="${product.farmName}" style="padding: 20px 20px; display: inline-block;"></h3>
            </a>
        </div>

        <div class="row mb-5">
            <div class="col-lg-6 ftco-animate">
                <a th:href="${thumbnail}" class="image-popup prod-img-bg">
                    <img th:src="${thumbnail}" class="img-100" alt="product image" id="thumbnail"></a>
            </div>
            <div class="col-lg-6 product-details pl-md-5 ftco-animate" style="display: flex; flex-direction: column;">
                <div style="flex: 1">
                    <h3 th:text="${product.name}" id="name"></h3>
                    <p class="price" style="display: flex; justify-content: end;">
                        <span th:text="${#numbers.formatInteger(product.price, 3, 'COMMA')}+원" id="price"></span>
                    </p>
                    <div class="text-roller">
                        <div class="roller">
                            <select style="width: 100%; height: 100%;">
                                <option selected>시세 조회</option>
                                <option th:each="line : ${marketPrices}"
                                        th:text="${line.item_name}+' '+${line.kind_name}+' '+${line.rank}+' '+${line.dpr2}+'원'"></option>
                            </select>
                        </div>
                    </div>
                </div>


                <div class="w-100" style="align-self: flex-end">
                    <div class="row mt-4 w-100" style="justify-content: space-around; margin: 0">
                        <div class="input-group d-flex w-100">
                            <span class="input-group-btn">
	                           	<button type="button" class="quantity-left-minus btn" data-type="minus" data-field="">
	                                <i class="ion-ios-remove"></i>
	                           	</button>
	                		</span>
                            <input type="text" id="quantity" name="quantity" class="quantity form-control input-number"
                                   value="1" min="1" max="100" style="width: 80%">
                            <span class="input-group-btn">
                                <button type="button" class="quantity-right-plus btn" data-type="plus" data-field="">
                                    <i class="ion-ios-add"></i>
                                </button>
                            </span>
                        </div>
                    </div>
                    <div class="mt-3 w-100"
                         style="display: flex; justify-content: space-around; font-size: 0.9rem; align-items: center; height: 56px">
                        <button id="buy" data-toggle="modal" data-target="#buyNowModal"
                                style="height: 100% !important; width: 50%; color: #000; font-size: inherit">
                            <!--                            <i class="fa-regular fa-heart" style="font-size: 1.2rem; margin: 0 10px;"></i>-->
                            <!--                            찜하기-->
                            바로 구매
                        </button>
                        <button data-toggle="modal" data-target="#exampleModalCenter" id="put-cart"
                                class="btn btn-black py-3 px-5 ml-2"
                                style="font-size: inherit; color: #fff; width: 50%; height: 100% !important; background-color: #1c7430 !important;"
                                th:data-product-id="${product.id}" th:data-farm-id="${product.farmId}">장바구니에 넣기
                        </button>
                    </div>
                    <!--                    <div class="w-100 mt-3">-->
                    <!--                        <button id="buy" class="btn btn-primary py-3 px-5 w-100"-->
                    <!--                                style="font-size: inherit; color: #fff; background-color: #1c7430 !important; height: 100% !important;"-->
                    <!--                                data-toggle="modal" data-target="#buyNowModal">바로 구매-->
                    <!--                        </button>-->
                    <!--                    </div>-->
                </div>
            </div>
        </div>


        <div class="row mt-5" style="margin-top: 10rem !important;">
            <div class="col-md-12 nav-link-wrap">
                <div class="nav nav-pills d-flex text-center" id="v-pills-tab" role="tablist"
                     aria-orientation="vertical">
                    <a class="nav-link ftco-animate active mr-lg-1" id="v-pills-1-tab" data-toggle="pill"
                       href="#v-pills-1" role="tab" aria-controls="v-pills-1" aria-selected="true">상품 정보</a>

                    <a class="nav-link ftco-animate mr-lg-1" id="v-pills-2-tab" data-toggle="pill" href="#v-pills-2"
                       role="tab" aria-controls="v-pills-2" aria-selected="false">구매 후기</a>

                    <a class="nav-link ftco-animate" id="v-pills-3-tab" data-toggle="pill" href="#v-pills-3" role="tab"
                       aria-controls="v-pills-3" aria-selected="false">배송/교환/반품 안내</a>

                </div>
            </div>
            <div class="col-md-12 tab-wrap">

                <div class="tab-content bg-light" id="v-pills-tabContent">
                    <h2 style="margin: 0; padding: 15px; border-bottom: 1px solid">농가 소개</h2>
                    <div class="tab-pane fade show active" id="v-pills-1" role="tabpanel" aria-labelledby="day-1-tab">
                        <!--농가 소개-->
                        <div>
                            <div class="d-flex w-100">
                                <div class="slider">
                                    <button class="prev" onclick="changeSlide(-1)">&#60;</button>
                                    <div class="slides">
                                            <img onclick="slide" th:each="farmImg: ${farmImgs}" th:src="${farmImg.img}" alt="image" class="slide img-thumbnail" style="aspect-ratio: 4/3;">
                                    </div>
                                    <button class="next" onclick="changeSlide(1)">&#62;</button>
                                </div>
                                <div class="text-content">
                                    <a th:href="'/farm/'+${product.farmId}"><h2 th:text="${product.farmName}" style="color: #1c7430;"></h2></a>
                                    <h4 class="mt-5" th:text="${product.farmDetail}"></h4>
                                </div>
                            </div>
                        </div>
                        <div class="w-100" style="border: 10px solid #fff"></div>
                        <div class="p-4" th:text="${product.detail}"></div>
                        <div th:each="productImg:${productImgs}">
                            <img th:src="${productImg.img}" alt="product image" class="img-100">
                        </div>
                    </div>

                    <div class="tab-pane fade" id="v-pills-2" role="tabpanel" aria-labelledby="v-pills-day-3-tab">
                        <div class="row p-4">
                            <div class="col-md-12">
                                <h3 class="mb-4">고객 리뷰</h3>
                                <div class="review-list">
                                    <div class="review-item mb-4 pb-3 border-bottom" th:each="review : ${reviewList}">
                                        <div class="review-header d-flex justify-content-between align-items-center mb-2">
                                            <h5 class="review-title mb-0" th:text="${review.title}">Review Title</h5>
                                            <div class="review-meta">
                                                <span class="review-author mr-3" th:text="${userName}">작성자 이름</span>
                                                <span class="review-rating">
                                <i class="fas fa-star text-warning"
                                   th:each="i : ${#numbers.sequence(1, review.score)}"></i>
                                <i class="far fa-star text-warning"
                                   th:each="i : ${#numbers.sequence(1, 5 - review.score)}"></i>
                            </span>
                                            </div>
                                        </div>
                                        <p class="review-content mb-2" th:text="${review.content}">Review content goes
                                            here. This is where the customer's detailed feedback will be displayed.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="v-pills-3" role="tabpanel" aria-labelledby="v-pills-day-2-tab">
                    <div class="p-4">
                        <div class="mb-4">
                            <h4>배송 정보</h4>
                            <table>
                                <tr>
                                    <th>배송 방법</th>
                                    <th>순차배송</th>
                                </tr>
                                <tr>
                                    <th>직거래 여부</th>
                                    <th>가능</th>
                                </tr>
                            </table>
                        </div>
                        <div class="mb-4">
                            <h4>교환/반품 제한사항</h4>
                            <ul>
                                <li>주문/제작 상품의 경우, 상품의 제작이 이미 진행된 경우</li>
                                <li>상품 포장을 개봉하여 사용 또는 설치 완료되어 상품의 가치가 훼손된 경우 (단, 내용 확인을 위한 포장 개봉의 경우는 예외)</li>
                                <li>고객의 사용, 시간경과, 일부 소비에 의하여 상품의 가치가 현저히 감소한 경우</li>
                                <li>세트상품 일부 사용, 구성품을 분실하였거나 취급 부주의로 인한 파손/고장/오염으로 재판매 불가한 경우</li>
                                <li>모니터 해상도의 차이로 인해 색상이나 이미지가 실제와 달라, 고객이 단순 변심으로 교환/반품을 무료로 요청하는 경우</li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    </div>
</section>


<footer class="ftco-footer ftco-section">
    <div class="container">
        <div class="row">
            <div class="mouse">
                <a href="#" class="mouse-icon">
                    <div class="mouse-wheel"><span class="ion-ios-arrow-up"></span></div>
                </a>
            </div>
        </div>
        <div class="row mb-5">
            <div class="col-md">
                <div class="ftco-footer-widget mb-4">
                    <h2 class="ftco-heading-2">전국로컬푸드 우리음식</h2>
                    <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
                        <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
                        <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
                        <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md">
                <div class="ftco-footer-widget mb-4 ml-md-5">
                    <ul class="list-unstyled">
                        <li><a href="#" class="py-2 d-block">우리음식 소개</a></li>
                        <li><a href="#" class="py-2 d-block">이용안내</a></li>
                        <li><a href="#" class="py-2 d-block">개인정보처리방침</a></li>
                        <li><a href="#" class="py-2 d-block">이용약관</a></li>
                        <li><a href="#" class="py-2 d-block">고객센터</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md">
                <div class="ftco-footer-widget mb-4">
                    <div class="block-23 mb-3">
                        <ul>
                            <li><span class="icon icon-map-marker"></span>
                                <span class="text">춘천시 평화로 25 (근화동 199)</span>
                            </li>
                            <li><a href="#"><span class="icon icon-phone"></span><span
                                    class="text">+82 033) 257-7800</span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 text-center">

                <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    Copyright &copy;<script>document.write(new Date().getFullYear());</script>
                    All rights reserved | This template is made with <i class="icon-heart color-danger"
                                                                        aria-hidden="true"></i> by <a
                            href="https://colorlib.com" target="_blank">Colorlib</a>
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- 배송지 입력 모달 -->
<div class="modal fade" id="buyNowModal" tabindex="-1" role="dialog" aria-labelledby="buyNowModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="buyNowModalLabel">배송지 정보 입력</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="buyNowForm" action="/pay" method="GET">

                    <input type="hidden" id="amountValue" name="amountValue">
                    <input type="hidden" id="directPay" name="directPay" value="1">
                    <input type="hidden" id="quantityValue" name="quantity">
                    <input type="hidden" id="priceValue" name="price">
                    <input type="hidden" id="productId" name="productId" th:value="${product.id}">

                    <div class="form-group">
                        <label for="buyerName">이름</label>
                        <input type="text" class="form-control" id="buyerName" name="receiverName"
                               th:value="${userName != null ? userName : ''}" required>
                    </div>
                    <div class="form-group">
                        <label for="buyerPhone">전화번호</label>
                        <input type="text" class="form-control" id="buyerPhone" name="receiverPhone"
                               th:value="${phoneNumber != null ? phoneNumber : ''}" required>
                    </div>
                    <div class="form-group">
                        <label for="buyerAddress">주소</label>
                        <input type="text" class="form-control" id="buyerAddress" name="receiverAddress"
                               th:value="${addressResponse != null and addressResponse.address != null ? addressResponse.address : ''}"
                               required>
                    </div>
                    <div class="form-group">
                        <label for="buyerDetailAddress">상세 주소</label>
                        <input type="text" class="form-control" id="buyerDetailAddress" name="receiverAddressDetail"
                               th:value="${addressResponse != null and addressResponse.detail != null ? addressResponse.detail : ''}"
                               required>
                    </div>
                    <div class="form-group">
                        <label for="buyerPostalCode">우편번호</label>
                        <input type="text" class="form-control" id="buyerPostalCode" name="invoiceNumber"
                               th:value="${addressResponse != null and addressResponse.zoneNumber != null ? addressResponse.zoneNumber : ''}"
                               required>
                    </div>

                    <!-- 배송 방법 선택 -->
                    <div class="form-group">
                        <label for="deliveryMethod">배송 방법</label><br>
                        <input type="radio" id="delivery" name="deliveryMethod" value="delivery" checked>
                        <label for="delivery">택배로 받기</label><br>
                        <input type="radio" id="pickup" name="deliveryMethod" value="pickup">
                        <label for="pickup">직거래하기</label>
                    </div>

                    <!-- 직거래 날짜 선택 -->
                    <div class="form-group" id="transactionDateField" style="display: none;">
                        <label for="transactionDate">직거래 날짜</label>
                        <input type="datetime-local" class="form-control" id="transactionDate" name="transactionDate"
                               placeholder="날짜를 선택하세요">
                    </div>

                    <button type="submit" class="btn btn-primary">주문하기</button>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- loader -->
<div id="ftco-loader" class="show fullscreen">
    <svg class="circular" width="48px" height="48px">
        <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/>
        <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                stroke="#F96D00"/>
    </svg>
</div>

<script src="/js/cart.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery-migrate-3.0.1.min.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.easing.1.3.js"></script>
<script src="/js/jquery.waypoints.min.js"></script>
<script src="/js/jquery.stellar.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/aos.js"></script>
<script src="/js/jquery.animateNumber.min.js"></script>
<script src="/js/bootstrap-datepicker.js"></script>
<script src="/js/scrollax.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
<script src="/js/google-map.js"></script>
<script src="/js/main.js"></script>

<script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');

    function showSlide(index) {
        slides[currentSlide].classList.remove('active');
        currentSlide = (index + slides.length) % slides.length;
        slides[currentSlide].classList.add('active');
    }

    function changeSlide(direction) {
        showSlide(currentSlide + direction);
    }

    // 초기화: 첫 번째 슬라이드를 표시
    showSlide(0);


    $(document).ready(function () {
        // 배송 방법에 따라 직거래 날짜 선택 필드를 표시/숨기기
        $('input[name="deliveryMethod"]').change(function () {
            if ($('#pickup').is(':checked')) {
                $('#transactionDateField').show();
                $('#transactionDate').prop('required', true); // 필수로 설정
            } else {
                $('#transactionDateField').hide();
                $('#transactionDate').prop('required', false); // 필수 해제
            }
        });

        // 초기화 시, '택배로 받기' 선택에 따른 필드 숨김
        if ($('#pickup').is(':checked')) {
            $('#transactionDateField').show();
        } else {
            $('#transactionDateField').hide();
        }

        var today = new Date();
        var offset = 9 * 60 * 60 * 1000; // UTC+9 시간 오프셋
        var seoulTime = new Date(today.getTime() + offset);
        seoulTime.setDate(seoulTime.getDate() + 1);

        var year = seoulTime.getFullYear();
        var month = String(seoulTime.getMonth() + 1).padStart(2, '0');
        var day = String(seoulTime.getDate()).padStart(2, '0');
        var hours = String(seoulTime.getHours()).padStart(2, '0');
        var minutes = String(seoulTime.getMinutes()).padStart(2, '0');

        // 'YYYY-MM-DDTHH:MM' 형식으로 변환
        var tomorrow = year + '-' + month + '-' + day + 'T' + hours + ':' + minutes;

        // transactionDate 필드의 min 속성에 값 설정
        document.getElementById("transactionDate").setAttribute('min', tomorrow);

    });


    document.getElementById("buyNowForm").addEventListener("submit", function (event) {
        // 수량과 가격 가져오기
        const quantity = parseInt(document.getElementById('quantity').value);
        const priceText = document.getElementById('price').innerText;

        // 가격에서 숫자만 추출 (예: "1,000원" -> 1000)
        const price = parseInt(priceText.replace(/[^0-9]/g, ''));

        // amountValue 계산
        const amountValue = quantity * price;

        // Hidden input fields에 값 설정
        document.getElementById('amountValue').value = amountValue;
        document.getElementById('quantityValue').value = quantity;
        document.getElementById('priceValue').value = price;
    });


    document.getElementById("buyNowForm").addEventListener("submit", function (event) {
        // 추가적인 클라이언트 측 검증이 필요한 경우 여기에 추가

        // 검증 후 서버로 폼 데이터를 전송
        // 폼의 기본 동작에 따라 자동으로 /pay로 POST 요청이 전송됩니다.
    });


    document.getElementById("put-cart").addEventListener('click', function () {
        const productId = this.getAttribute('data-product-id');
        const farmId = this.getAttribute('data-farm-id');
        const user = getCookie('id');
        const data = getProductInfo(productId, farmId);
        // if (user !== null) {
        //     // post
        //     postRequest({userId: user, productId: productId, quantity: document.getElementById("quantity").value});
        //     return;
        // }
        saveProductToCookie(data);
    });


    $(document).ready(function () {

        var quantitiy = 0;
        $('.quantity-right-plus').click(function (e) {

            // Stop acting like a button
            e.preventDefault();
            // Get the field name
            var quantity = parseInt($('#quantity').val());

            // If is not undefined

            $('#quantity').val(quantity + 1);


            // Increment

        });

        $('.quantity-left-minus').click(function (e) {
            // Stop acting like a button
            e.preventDefault();
            // Get the field name
            var quantity = parseInt($('#quantity').val());

            // If is not undefined

            // Increment
            if (quantity > 0) {
                $('#quantity').val(quantity - 1);
            }
        });

    });
</script>

</body>
</html>